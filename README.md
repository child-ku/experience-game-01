# 可视化工作流设计器

一个基于 Vue 3 的现代化可视化工作流设计器，支持拖拽式节点编辑、连接线管理、泳道图等功能。

## 功能特性

### 1. 流程图绘制功能
- ✅ **拖拽式节点放置**：从左侧节点库拖拽节点到画布
- ✅ **丰富的节点类型**：开始/结束、任务、决策、并行、子流程
- ✅ **节点连接**：通过连接点拖拽创建节点间的连接
- ✅ **节点编辑**：支持节点名称、描述、位置编辑
- ✅ **节点删除**：点击节点删除按钮删除节点
- ✅ **节点调整**：支持拖拽移动和调整大小

### 2. 高级绘图功能
- ✅ **网格显示**：可切换网格背景辅助对齐
- ✅ **标尺显示**：可切换标尺辅助定位
- ✅ **缩放控制**：支持画布放大、缩小、重置
- ✅ **泳道图支持**：支持创建和管理多个泳道
- ✅ **多层画布**：支持大尺寸画布滚动查看

### 3. 数据管理功能
- ✅ **保存工作流**：保存到浏览器本地存储
- ✅ **导出工作流**：导出为 JSON 文件
- ✅ **导入工作流**：从 JSON 文件导入

## 技术栈

- **Vue 3** - 渐进式 JavaScript 框架
- **Vite** - 下一代前端构建工具
- **Ant Design Vue** - 企业级 UI 组件库
- **Ant Design Icons** - 图标库
- **Lodash** - 实用工具库

## 项目结构

```
.
├── index.html              # HTML 入口文件
├── package.json            # 项目依赖配置
├── vite.config.js          # Vite 配置文件
├── README.md              # 项目说明文档
└── src/
    ├── main.js            # 应用入口
    ├── App.vue            # 根组件
    └── components/
        ├── WorkflowDesigner.vue  # 工作流设计器主组件
        └── WorkflowNode.vue      # 工作流节点组件
```

## 安装和运行

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动

### 3. 构建生产版本

```bash
npm run build
```

### 4. 预览生产版本

```bash
npm run preview
```

## 使用指南

### 1. 添加节点

1. 从左侧节点库中选择一个节点类型
2. 将节点拖拽到画布上的任意位置
3. 节点会自动添加到画布中

### 2. 连接节点

1. 点击源节点右侧的连接点（蓝色圆点）
2. 按住鼠标左键拖动到目标节点
3. 释放鼠标完成连接

### 3. 编辑节点

1. 点击节点选中它
2. 在右侧属性面板中编辑节点属性
3. 可以修改节点名称、描述、位置等

### 4. 移动节点

1. 点击并按住节点的空白区域
2. 拖动到目标位置后释放

### 5. 调整节点大小

1. 使用节点右下角的调整手柄
2. 拖动手柄可以调整节点的宽度和高度

### 6. 删除节点

1. 鼠标悬停在节点上
2. 点击右上角的删除按钮（×）
3. 确认删除（如果配置了确认对话框）

### 7. 添加泳道

1. 在右侧属性面板的"泳道管理"部分
2. 输入泳道名称
3. 点击"添加泳道"按钮
4. 泳道会自动平分画布宽度

### 8. 保存和导出

- **保存**：点击顶部工具栏的"保存"按钮，工作流将保存到浏览器本地存储
- **导出**：点击"导出"按钮，工作流将导出为 JSON 文件
- **导入**：点击"导入"按钮，选择 JSON 文件导入工作流

## 节点类型说明

### 基础节点

| 节点类型 | 图标 | 颜色 | 说明 |
|---------|------|------|------|
| 开始节点 | ▶️ | 绿色 | 流程的起始点 |
| 结束节点 | ✅ | 蓝色 | 流程的结束点 |
| 任务节点 | ➕ | 橙色 | 表示一个具体的任务或操作 |
| 决策节点 | ❓ | 红色 | 表示一个判断或分支点 |

### 高级节点

| 节点类型 | 图标 | 颜色 | 说明 |
|---------|------|------|------|
| 并行节点 | 🌳 | 紫色 | 表示并行执行的任务 |
| 子流程节点 | 📂 | 青色 | 表示嵌套的子流程 |

## 工作流数据格式

导出的工作流数据为 JSON 格式，结构如下：

```json
{
  "nodes": [
    {
      "id": "node_1",
      "type": "start",
      "label": "开始",
      "x": 100,
      "y": 100,
      "width": 60,
      "height": 60,
      "description": "流程开始",
      "properties": {}
    }
  ],
  "edges": [
    {
      "id": "edge_1",
      "source": "node_1",
      "target": "node_2"
    }
  ],
  "swimlanes": [
    {
      "id": "lane_1",
      "name": "部门A",
      "width": 50
    }
  ],
  "version": "1.0"
}
```

## 浏览器支持

- Chrome (推荐)
- Firefox
- Safari
- Edge

## 开发计划

- [ ] 支持撤销/重做功能
- [ ] 添加更多节点类型
- [ ] 支持节点复制粘贴
- [ ] 添加快捷键支持
- [ ] 支持自定义节点样式
- [ ] 添加流程图模板
- [ ] 支持导出为图片
- [ ] 支持团队协作

## License

MIT